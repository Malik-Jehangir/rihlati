import './polyfills.server.mjs';
import{a as de,c as le,d as pe}from"./chunk-JPE76ING.mjs";import{b as J,d as X,g as ee,h as re,k as te,l as ie,m as ne,n as ae,p as oe,r as se,t as ce,w as me}from"./chunk-U3QHKAP7.mjs";import{a as ue,b as ge}from"./chunk-GFN2XLDX.mjs";import{a as H,b as U}from"./chunk-DS2WKUEB.mjs";import{d as $}from"./chunk-TI5W2NKN.mjs";import"./chunk-J37IZDV3.mjs";import{a as _e,b as fe,c as he,d as ve,e as Se,i as ye}from"./chunk-PVFEC2H4.mjs";import{Q,S as Y,ca as q,da as Z}from"./chunk-HFNTF5P4.mjs";import{a as be}from"./chunk-Z7ONBUTL.mjs";import{Ab as r,Bb as n,Cb as p,Dc as b,Gb as S,Hb as O,Jb as M,Kb as g,Ob as A,Pa as T,Pb as D,Qb as F,Ra as s,Tc as K,Ub as N,Uc as G,V as C,Vb as y,Vc as j,Wb as B,X as k,Xb as W,Yb as o,Yc as L,Z as l,Zb as z,_b as _,ca as w,da as E,ea as x,fa as P,fb as v,gb as I,kb as h,kc as V,ta as R,tb as u,zb as d}from"./chunk-TF4FNHRX.mjs";import"./chunk-X2SEQXRR.mjs";var Ee=["determinateSpinner"];function Pe(a,c){if(a&1&&(x(),r(0,"svg",11),p(1,"circle",12),n()),a&2){let e=g();u("viewBox",e._viewBox()),s(),y("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),u("r",e._circleRadius())}}var Re=new k("mat-progress-spinner-default-options",{providedIn:"root",factory:Te});function Te(){return{diameter:xe}}var xe=100,Ie=10,Me=(()=>{class a{_elementRef=l(R);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=l(Re),t=Y(),i=this._elementRef.nativeElement;this._noopAnimations=t==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=i.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&t==="reduced-motion"&&i.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=xe;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-Ie)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=v({type:a,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,i){if(t&1&&A(Ee,5),t&2){let m;D(m=F())&&(i._determinateCircle=m.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(t,i){t&2&&(u("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),W("mat-"+i.color),y("width",i.diameter,"px")("height",i.diameter,"px")("--mat-progress-spinner-size",i.diameter+"px")("--mat-progress-spinner-active-indicator-width",i.diameter+"px"),B("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",b],diameter:[2,"diameter","diameter",b],strokeWidth:[2,"strokeWidth","strokeWidth",b]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,i){if(t&1&&(h(0,Pe,2,8,"ng-template",null,0,V),r(2,"div",2,1),x(),r(4,"svg",3),p(5,"circle",4),n()(),P(),r(6,"div",5)(7,"div",6)(8,"div",7),S(9,8),n(),r(10,"div",9),S(11,8),n(),r(12,"div",10),S(13,8),n()()()),t&2){let m=N(1);s(4),u("viewBox",i._viewBox()),s(),y("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),u("r",i._circleRadius()),s(4),d("ngTemplateOutlet",m),s(2),d("ngTemplateOutlet",m),s(2),d("ngTemplateOutlet",m)}},dependencies:[j],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return a})();var Ce=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=I({type:a});static \u0275inj=C({imports:[Q]})}return a})();function Ae(a,c){a&1&&(r(0,"div",11),p(1,"mat-progress-spinner",12),r(2,"div",13),o(3,"Finding nearby drivers\u2026"),n()())}function De(a,c){if(a&1){let e=O();r(0,"mat-card"),p(1,"img",16),r(2,"mat-card-title"),o(3),n(),r(4,"mat-card-subtitle"),o(5),n(),r(6,"mat-card-content")(7,"p",17)(8,"mat-icon"),o(9,"timer"),n(),o(10," ETA: "),r(11,"strong"),o(12),n()(),r(13,"p",17)(14,"mat-icon"),o(15,"route"),n(),o(16," Distance: "),r(17,"strong"),o(18),n()(),r(19,"p",17)(20,"mat-icon"),o(21,"payments"),n(),o(22," Fare: "),r(23,"strong"),o(24),n(),r(25,"span",8),o(26),n()()(),r(27,"mat-card-actions",18)(28,"button",19),M("click",function(){let i=w(e).$implicit,m=g(2);return E(m.book(i))}),o(29,"Book"),n()()()}if(a&2){let e=c.$implicit,t=g(2);s(),d("src",e.image,T)("alt",e.car),s(2),z(e.car),s(2),_("Driver: ",e.name),s(7),_("",e.etaMin," min"),s(6),_("",e.distanceKm," km"),s(6),_("",e.priceSar," SAR"),s(2),_("\xB7 ",t.currency.toPKR(e.priceSar)," PKR")}}function Fe(a,c){if(a&1&&(r(0,"div",14),h(1,De,30,8,"mat-card",15),n()),a&2){let e=g();s(),d("ngForOf",e.drivers)}}var ke=class a{fb=l(ae);router=l($);snack=l(ue);currency=l(be);form=this.fb.group({pickup:[{value:"Current location",disabled:!0}],destination:["",X.required]});finding=!1;drivers=[];estimatePrice(c){return Math.round(12+c*2.1)}search(){if(this.form.invalid){this.form.markAllAsTouched();return}this.finding=!0,this.drivers=[],this.snack.open("Finding nearby drivers\u2026",void 0,{duration:1200}),setTimeout(()=>{let c=[.9,2.3,7.8,12.4],e=[2,4,9,14],t=[{car:"Toyota Corolla",img:"assets/car01.png"},{car:"Nissan Sunny",img:"assets/car02.png"},{car:"Land Cruiser",img:"assets/car03.png"},{car:"Volkswagen Passat",img:"assets/car04.png"}],i=["Ahmed M.","Khalid R.","Mishal A.","Yasir B."];this.drivers=t.map((m,f)=>({id:f+1,name:i[f],car:m.car,image:m.img,distanceKm:c[f],etaMin:e[f],priceSar:this.estimatePrice(c[f])})),this.finding=!1},1200)}book(c){let e={name:`Ride with ${c.name} (${c.car})`,priceSar:c.priceSar};this.router.navigate(["/checkout"],{state:{room:e}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=v({type:a,selectors:[["app-ride"]],decls:22,vars:3,consts:[[1,"stack",3,"ngSubmit","formGroup"],[1,"row",2,"gap","1rem","flex-wrap","wrap"],["appearance","outline",2,"min-width","260px","flex","1 1 280px"],["matInput","","formControlName","pickup","readonly",""],["matSuffix",""],["appearance","outline",2,"min-width","260px","flex","2 1 360px"],["matInput","","formControlName","destination","placeholder","e.g., King Abdulaziz Road"],["mat-flat-button","","color","primary","type","submit"],[1,"muted"],["class","center",4,"ngIf"],["class","grid","style","margin-top:1rem;",4,"ngIf"],[1,"center"],["mode","indeterminate","diameter","36"],[1,"muted",2,"margin-top",".5rem"],[1,"grid",2,"margin-top","1rem"],[4,"ngFor","ngForOf"],[3,"src","alt"],[1,"row"],[1,"actions"],["mat-stroked-button","",3,"click"]],template:function(e,t){e&1&&(r(0,"h2"),o(1,"Book a Ride"),n(),r(2,"form",0),M("ngSubmit",function(){return t.search()}),r(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),o(6,"Pickup"),n(),p(7,"input",3),r(8,"mat-icon",4),o(9,"my_location"),n()(),r(10,"mat-form-field",5)(11,"mat-label"),o(12,"Destination"),n(),p(13,"input",6),r(14,"mat-icon",4),o(15,"place"),n()(),r(16,"button",7),o(17,"Find Drivers"),n()(),r(18,"span",8),o(19,"Your location is used as the departing point."),n()(),h(20,Ae,4,0,"div",9)(21,Fe,2,1,"div",10)),e&2&&(s(2),d("formGroup",t.form),s(18),d("ngIf",t.finding),s(),d("ngIf",!t.finding&&t.drivers.length))},dependencies:[L,K,G,oe,te,J,ee,re,ie,ne,de,me,se,ce,pe,le,Z,q,ye,_e,Se,he,ve,fe,U,H,Ce,Me,ge],styles:[".stack[_ngcontent-%COMP%]{display:grid;gap:1rem}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}.row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.muted[_ngcontent-%COMP%]{opacity:.8;font-size:13px}.center[_ngcontent-%COMP%]{display:grid;place-items:center;padding:2rem 0}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:120px;width:100%;object-fit:cover;border-radius:8px}"]})};export{ke as RideComponent};
